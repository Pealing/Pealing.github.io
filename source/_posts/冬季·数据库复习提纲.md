---
title:  "冬季·数据库复习提纲"
date: 2017-03-11 13:19:22
updated: 2017-03-11 13:19:22
categories: "冬季复习提纲"
---

###### 2017  Pealing
---

# 前言
    这是一份，上海大学冬季学期的数据库复习提纲
    基本上就是把书打了一遍
    不代表权威
    写了没考到，考了没写到
    都清不要怪我，谢谢
<!--more-->

### 第一章

##### 数据库发展阶段
* 人工管理阶段·特点：
	* 数据不保存在计算机内
	* 没有专用的软件对数据进行管理
	* 只有程序的概念，没有文件的概念。数据的组织方式必须由程序员自行设计安排。
	* 数据面向程序，即一组数据对应一个程序。

* 文件系统阶段·缺陷
	* 数据冗余
	* 不一致性
	* 数据联系弱

* 倒排文件系统阶段
	* 是索引文件的推广，为每个字段都提供单独的索引。

---

##### 数据库技术的发展（三大事件）
* IMS系统（1968年）：
	* IBM公司研制的IMS系统是一个典型的层次数据库系统。
	* 是数据库系统中第一个商用产品

* DBTG报告（1969年）：
	* CODASYL是美国数据系统语言协会的缩写。
	* **两大贡献**：1960年提出COBOL语言/1969年提出DBTG报告

* E.F.Codd的文章（1970年）
	* 第一次提出 ** 关系模型 **
	* 1970年发表于美国计算机学会通信杂志（CACM)

---

##### 数据库的术语

* 数据库（DB)
	是长期存储在计算机内，有组织、统一管理的相关数据的集合。

* 数据库管理系统（DBMS）
	DBMS是位于用户与操作系统OS指尖的一层数据管理软件，基于某种数据模型，可以分为**层次型、网状型、关系型和面向对象型**

* 数据库技术
	是研究数据库的结构、存储、设计、管理和使用的一门软件学科

---

### 第二章
##### 数据描述
* 概念设计中
	实体、实体集、属性、实体标识符
* 逻辑设计中
	字段、记录、文件、关键码
* 物理存储中
	位、字节、字、块、桶、卷

---

##### 数据联系
* **联系：** 是实体之间的相互关系。与一个联系有关的实体集个数，称为联系的**元数**。
* 二元联系的三种类型：一对一、一对多、多对多

---

##### 数据模型
* 概念模型：按用户的观点对数据建模，强调其语义表达能力。
	* 实体联系模型
* 逻辑数据模型（结构数据模型）：直接与DBMS有关、包含**数据结构、数据操作和数据完整性约束**
	* 层次模型
		用树形（层次）结构表示实体类型及实体间联系的数据模型。
	* 网状模型
		用有向图结构表示实体类型以及实体间联系的数据模型。
	* 关系模型
		用二维表格表达实体集
	* 面向对象模型
		对象、类

---

##### 三级结构两级映像
数据按外模式的描述提供给用户，按内模式的描述存储在磁盘中，而概念模式提供了连接这两级相对稳定的中间观点。

* 外模式：单个用户视图
	是用户与数据库系统的接口，是用户用到的那部分数据的描述。
* 概念模式；全局视图
	数据库中全部数据的整体逻辑结构的描述，包含记录间联系、数据的完整和安全性等要求。
* 内模式：存储视图
	数据库在物理存储方面的描述，定义所有内部记录类型、索引和文件的组织方式，以及数据控制方面的细节。
* 模式/内模式映像
	存在于概念级和内部级之间，用于定义概念模式和内模式之间的对应性。
* 外模式/模式映像
	存在于外部级和概念级指尖，用于定义外模式和概念模式之间的对应性。

---
##### 两级数据独立性
* 物理数据独立性：**内模式**修改时，数据库物理结构有所变化，对模式/内模式映像做相应修改，可以使概念模式尽可能保持不变。
* 逻辑数据独立性：**概念模式**修改时，对外模式/模式映像做相应修改，可以使外模式和应用程序尽可能保持不变。

###### 管理系统
* DBMS的主要功能
	* 数据库的定义功能：DBMS提供DDl定义数据库的三级结构两级映像，定义数据的完整性约束、保密限制等约束。
	* 数据库的操纵功能：检索（查询）和更新（插入、删除、更新）
	* 数据库的保护功能：恢复、并发控制、完整性控制、安全性控制。
	* 数据库的维护功能：数据的载入、转换、转出、数据库的改组以及性能监控等功能。
	* 数据字典：存放三级结构定义的数据库。

* DBMS的模块组成
	* 查询处理器：DDL编译器、DML编译器、嵌入式DML的预编译器以及查询运行核心程序
	* 存储管理器：权限和完整性管理器、事务管理器、文件管理器以及缓冲区管理器

---

### 第三章

* **域** 是值的集合。

##### 关系模型的形式定义
* 三要素
	* 数据结构
		* 数据库中全部数据及相互联系都被组织成关系（二维表格）的形式
		* 关系模型的基本数据结构是**关系**
	* 数据操作
		* 关系运算分为**关系代数**和**关系演算**
		* 关系代数语言：查询操作是以集合操作为基础的运算。
		* 关系演算语言：查询操作是以谓词演算为基础的运算
	* 完整性规则
		* 实体完整性规则
		* 参照完整性规则
		* 用户定义的完整性规则

###### 基本运算
	* 并
	* 差
	* 笛卡尔积
	* 投影
	* 选择

##### 组合运算
	* 交
	* 联接
	* 自然联接
	* 除

---

### 第四章
##### SQL的组成
* 数据定义
* 数据操纵
* 数据控制
* 嵌入式SQL开发

---

##### 创建
	* 基本表：`Create Table 基本表名（列名 类型，……完整性约束……）`
	* 视图：`Create view 视图名（列表名） as select 查询语句`
	* 索引：`Create [unique] index 索引名 on 基本表名 （<列名>[<次序>],……）`

##### 撤销：
	* CASCADE(连锁式)：把SQL模式及其下属的基本表、视图、索引等所有元素全部撤销
	* RESREICT(约束式):只有当SQL模式中没有任何下述元素时，才能撤销，否则拒绝执行DROP。
	---
	* 基本表：`Drop table 基本表名 [CASCADE|RESREICT]`
	* 视图：`Drop view 视图名`
	* 索引：`Drop index 索引名`

##### 查询
	`select 目标表的列名或列表达式序列 FROM 基本表名、视图序列|表引用 [where 表达式]
	[group by 列名序列 [having 组条件表达式]][order by 列名[asc|desc]]`

##### 聚合函数
	count(*) 计算元组个数
	Count(列名) 对一列中的值计算个数
	SUM(列名)
	AVG(列名)
	MAX(列名)
	MIN(列名)

##### 数据更新
	* 插入：INSERT INTO 基本表名（列名表） VALUES（元组值）
	* 删除：DELETE FROM <表名> WHERE <条件表达式>
	* 修改：UPDATA 基本表名 SET 列名 = 值表达式 [where 条件表达式]

##### 视图
	·外模式一级的数据结构的基本单位是视图（View）视图是从若干个基本表
	或其他视图构造出来的表，系统把视图定义存放在数据字典中。因此，视图被称为"虚表"。

* 如果一个视图是从多个基本表使用联接操作导出的，不允许对其进行更新
* 如果在导出视图的过程中，时候用了分组和聚合操作，不允许对其更新
* 如果视图是从单个基本表使用选择、投影操作导出的，并且包含了基本表的主键或某个候选键，则称为"行列子集视图"，可以更新


##### 索引
	属于物理存储的路径概念，而不是逻辑概念。

##### 嵌入式SQL
	· 宿主语言+嵌入式SQL->预处理程序->宿主语言+函数调用->宿主语言编译程序->目标程序

* EXEC SQL <SQL语句> END_EXEC
* 允许嵌入的SQL语句引用宿主语言的程序变量
	- 在引用这些变量时必须在这些变量前加冒号"："
	- 这些变量由宿主语言的程序定义;
	- 由SQL的BEGIN DECLARE SECTION 与END DECLARE SECTION语句之间说明。

** 主语言不能应用数据库中的字段变量 **

* 游标机制
	- 将集合操作转换为单元组处理
	- SQL的执行是面向集合的，一条SQL语句原则上可以产生或处理多条记录
	- 宿主语句是面向记录的，一组主变量一次只能存放一条记录

* 定义游标
	- 定义中的SELECT语句并不立即执行
`EXEC SQL DECLARE <游标名> CURSOR FOR <SELECT> [FOR UPDATE OF <字段1>] EXD_EXEC`

* 打开游标
	- 打开游标语句使得游标处于活动状态，与游标相应的查询语句被执行
`EXEC SQL OPEN <游标名> END_EXEC`

* 推进游标语句
 	- 游标推进一个记录，并把游标指向的记录中的值去除，送到INTO子句后相应的主变量中
`EXEC SQL FETCH FROM <游标名> INTO <变量表> END_EXEC` 

* 关闭游标语句
	- 关闭游标，使它不再和查询结果相联系
`EXEC SQL CLOSE <游标名>	 END_EXEC`

##### 嵌入式SQL的使用技术

* 在嵌入式SQL中， SQL的数据定义DDL与控制语句DCL都不需要使用游标。
* 不涉及游标的嵌入式SQL
 	- DML语句：对于INSERT、DELETE和UPDATE语句，只要加上前缀标识“EXEC SQL”和结束标志“END_EXEC”，就能嵌入在宿主语言程序中使用
 	- 对于SELECT语句，如果已知查询结果肯定是单元组时，可直接嵌入在主程序中使用，此时在SELECI语句中增加一个INTO子句，指出找到的值应送到相应的共享变量中去
* 涉及游标的嵌入式SQL DML语句
	- 当SELECT语句查询结果是多个元组时，此时要用游标机制把多个元组一次一个地传送给宿主语言程序处理。
	- 对游标指向的元组进行修改或删除操作，当游标处于活动状态时，可以修改或删除游标指向的元组。

##### 动态SQL语句
	   在实际问题中，用户对数据库的操作有时在系统运行时才能提出来，
	   这时要用到嵌入式SQL的动态技术才能实现
* 动态SQL预备语句
* 动态SQL执行语

### 第六章

##### ER模型的基本元素
	* 实体：数据对象，指应用中可以区别的、客观存在的事物
	* 联系
	* 属性：实体的某一特征

##### 属性分类
	* 基本属性（不可再分）和复合属性（可再分）
	* 单值属性（同一实体属性只能取一个值）和多值属性（可能取多个值）
	* 导出属性：具有相互依赖的属性推导而产生的属性
	* 空值

##### 联系的设计
* 一个联系涉及到的实体集的个数，称为该联系的 *元数* 或 *度数*
* E1中每个实体与E2中有联系实体的数目的最小值MIN和最大值MAX，称为E1的*基数*，记（MIN，MAX）
* 联系涉及到的实体集之间实体对应的方式，称为联系的连通词（1:1,1:N,M:N,M:1)

##### ER模型的扩充
* 依赖联系：一个实体的存在必须以另一实体的存在为前提
* 弱实体：一个实体对另一些实体具有很强的依赖联系，而且该实体的主键部分或全部从其父实体中获得。
* 子类
* 超类
	- 子类和超类之间具有继承性
	- 这种继承性是通过子类实体和超类实体有相同的实体标识符实现的

### ER模型向关系模型的转换(P163)

### 关于英文T T
* Primary Key 主键
* Foreign Key  reference外键
* Exists 存在
* Distinct 消除重复
* Cascade/restrict 撤销删除
* inner out 内连接
* left（right） outer join 左（右）外联接
* Full outer join 完全外联接
* cross join 交叉联接

### 大题
* ER图
* 转换关系模式
* 建表
* 写关系代数和SQL语句
* 优化





